<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_additional_charge_custom_id">
        <t style="font-family: 'Arial,Helvetica,sans-serif' !important;" t-call="sr_uaa_main.report_uaa_invoice_layout">
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and doc.company_id.sudo()">
                <t t-set="company" t-value="doc.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>

            <t t-set="o" t-value="doc.with_context(lang=lang)"/>
            <t t-if="false" t-set="address">
                <address t-field="doc.partner_id"
                         t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                <div t-if="doc.partner_id.vat" class="mt16">
                    <t t-if="doc.company_id.country_id.vat_label" t-esc="doc.company_id.country_id.vat_label"
                       id="inv_tax_id_label"/>
                    <t t-else="">Tax ID</t>:
                    <span t-field="doc.partner_id.vat"/>
                </div>
            </t>
            <div class="page">
                <div class="col-12" style="width:100%;">
                    <div style="width:50%;float:left;">
                        <h4>
                            <b t-esc="company.name" style="text-transform: uppercase !important; display:block;"/>
                        </h4>
                        <br/>
                        <t t-set="o" t-value="doc.with_context(lang=lang)"/>
                        <span>
                            <strong>Email :</strong>
                        </span>
                        <t t-if="company.partner_id">
                            <span t-if="company.partner_id.email"
                                  t-esc="company.partner_id.email"/>
                        </t>
<!--                        <t t-if="company.partner_id.active_child_id">-->
<!--                            <span t-if="company.partner_id.active_child_id.email"-->
<!--                                  t-esc="company.partner_id.active_child_id.email"/>-->
<!--                        </t>-->
                        <t t-else="">
                            <span t-if="company.partner_id.email" t-esc="company.partner_id.email"/>
                        </t>

                        <div t-if="false" class="mt16">
                            <t t-if="doc.company_id.country_id.vat_label"
                               t-esc="doc.company_id.country_id.vat_label"
                               id="inv_tax_id_label"/>
                            <t t-else="">Tax ID</t>:
                            <span t-field="doc.partner_id.vat"/>
                        </div>
                        <div class="">
                            <div t-if="doc.date_order" name="date_order">
                                <strong>Date:</strong>
                                <span t-field="doc.date_order"
                                      t-options='{"widget": "date"}'/>
                            </div>
                        </div>
                        <br/>
                        <div class="">
                            <div t-if="doc.partner_id" style="float:left;">
                                <strong>To:</strong>
                                <t t-esc="doc.partner_id.name"/>
                                <br/>
                                <t t-esc="doc.partner_id.mobile"/>
                                <br/>
                                <t t-esc="doc.partner_id.email"/>
                                <br/>
                            </div>
                        </div>
                    </div>

                    <div style="width:50%;float:right;">

                        <img style="margin-left:200px;max-height:100px;max-width: 230px;" t-if="company.logo"
                             t-att-src="image_data_uri(company.logo)"
                        />
                    </div>
                </div>
                <br/>
                <div class="col-12" style="width:100%;">

                    <div style=" position: fixed;right: 46%; top: 180px;">
                        <b style="text-align:center;">ADDITIONAL CHARGES</b>
                    </div>
                    <div style="right: 15px;position: fixed;top: 130px;color:#A9A9A9;">
                        <h6 style="">
                            <span style="width: 100%;float:right;text-align:right;">QUOTATION NUMBER</span>
                            <t t-if="doc.name != '/'" t-set="no" t-value="doc.name"/>
                            <span style="position:inherit;float:right;" t-esc='"#" + no'/>
                        </h6>
                    </div>
                </div>
                <br/>
                <div t-if="false" id="informations" class="row mt32 mb32"
                     style="float:left;width: 100%;margin-left: 10px;">
                    <div style="float: left;" t-if="doc.date_order" name="date_order">
                        <strong>Date:</strong>
                        <span class="m-0" t-field="doc.date_order"/>
                    </div>
                    <div style="margin-top: 5px;width: 100%;float: left;">
                        <span>To:</span>
                        <t t-esc="doc.partner_id.name"/>
                        <br/>
                        <t t-esc="doc.partner_id.mobile"/>
                        <br/>
                        <t t-esc="doc.partner_id.email"/>
                        <br/>
                    </div>
                    <br/>
                </div>
                <t t-set="display_discount" t-value="any(l.discount for l in doc.order_line)"/>
                <br/>

                <table t-if="doc.enquiry_id" class="uaa-main-table"
                       style="margin-top:20px;width:100%;border: solid #4F4C4D 1px !important;"
                       name="quotation_line_table">
                    <thead>
                        <tr>
                            <th name="th_serv_details" style="text-align:center;border: solid #4F4C4D px !important;">
                                <span>Service Details</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody class="sale_tbody">
                        <tr class="bg-200 o_line_section">
                            <td style="border: solid #4F4C4D 1px !important;width:100%;">
                                <table class="uaa-sub-table"
                                       style="border:none !important;margin-left:10px;width:100%;"
                                       cellspacing="0" cellpadding="0">
                                    <tbody>
                                        <tr>
                                            <td style="border:none !important;width:50%;">
                                                <span style="margin-left: 10px;">Service</span>
                                            </td>
                                            <td style="border:none !important;width:50%;">
                                                <span>:</span>
                                                <span t-if="doc.uaa_services_id" t-esc="doc.uaa_services_id.name"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border:none !important;">
                                                <span style="margin-left: 10px;">Service Details</span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <t t-set="count" t-value="0"/>
                                                <t t-foreach="doc.enquiry_id.services_ids" t-as="serv">
                                                    <span t-if="count != 0">,</span>
                                                    <span t-esc="serv.name"/>
                                                    <t t-set="count" t-value="1"/>
                                                </t>
                                            </td>
                                        </tr>
                                         <tr>
                                            <td style="border:none !important;">
                                                <span style="margin-left: 10px;">Service Type</span>
                                            </td>
                                             <td style="border:none !important;width:50%;">
                                                <span>:</span>
                                                <span t-if="doc.service_type_id" t-esc="doc.service_type_id.name"/>
                                            </td>
                                        </tr>

                                        <tr t-if="doc.service_type_id and not doc.service_type_id.is_departure">
                                            <td style="border:none !important;">
                                                <span
                                                        style="margin-left: 10px;">Arrival Flight Number
                                                </span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <span t-esc="doc.enquiry_id.arrival_flight_number"/>
                                            </td>
                                        </tr>
                                        
                                        <tr t-if="doc.service_type_id and not doc.service_type_id.is_departure">
                                            <td style="border:none !important;">
                                                <span
                                                        style="margin-left: 10px;">Arrival Date And Time
                                                </span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <!-- <span t-esc="doc.enquiry_id.arrival_flight_number"/> -->
                                                <span t-esc="doc.enquiry_id.arrival_date_str"/>
<!--                                                <t t-if="doc.enquiry_id.created_timezone">-->
<!--                                                    <span style="padding-left: 10px;">-->
<!--                                                        <t t-esc="doc.enquiry_id.created_timezone"/>-->
<!--                                                    </span>-->
<!--                                                </t>-->
                                            </td>
                                        </tr>
                                        

                                        <tr t-if="doc.service_type_id and not doc.service_type_id.is_arrival">
                                            <td style="border:none !important;">
                                                <span
                                                        style="margin-left: 10px;">Departure Flight Number
                                                </span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <span t-esc="doc.enquiry_id.departure_flight_number"/>

                                            </td>
                                        </tr>
                                        
                                        <tr t-if="doc.service_type_id and not doc.service_type_id.is_arrival">
                                            <td style="border:none !important;">
                                                <span
                                                        style="margin-left: 10px;">Departure Date And Time
                                                </span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <!-- <span t-esc="doc.enquiry_id.departure_flight_number"/> -->
                                                <span t-esc="doc.enquiry_id.departure_date_str"/>
<!--                                                <t t-if="doc.enquiry_id.created_timezone">-->
<!--                                                    <span style="padding-left: 10px;">-->
<!--                                                        <t t-esc="doc.enquiry_id.created_timezone"/>-->
<!--                                                    </span>-->
<!--                                                </t>-->
                                            </td>
                                        </tr>

                                        <tr>
                                            <td style="border:none !important;">
                                                <span style="margin-left: 10px;">Airport</span>
                                            </td>
                                            <td style="border:none !important;">
                                                <span>:</span>
                                                <span t-if="doc.enquiry_id.services=='meet_assist' or doc.enquiry_id.services=='airport_hotel' or doc.enquiry_id.services=='airport_lounge'">
                                                    <t t-if="doc.enquiry_id.airport_id">
                                                        <span
                                                                t-esc="doc.enquiry_id.get_name_custom_function()"/>
<!--                                                        <t t-if="o.enquiry_id.airport_id and o.enquiry_id.airport_id.code">-->
<!--                                                            <span>(</span>-->
<!--                                                            <span t-esc="o.enquiry_id.airport_id.code"/>-->
<!--                                                            <span>)</span>-->
<!--                                                        </t>-->
                                                    </t>
                                                </span>
                                                <t t-if="doc.enquiry_id.services=='airport_transfer'">
                                                    <t t-if="doc.service_type_id and not doc.service_type_id.is_departure">
                                                        <t t-if="doc.enquiry_id.pick_up_airport_id">
                                                            <span t-esc="doc.enquiry_id.get_name_custom_function()"/>
                                                            <span>(</span>
                                                            <span t-esc="doc.enquiry_id.pick_up_airport_id.code"/>
                                                            <span>)</span>
                                                        </t>
                                                    </t>
                                                    <t t-if="doc.service_type_id and not doc.service_type_id.is_arrival">
                                                        <t t-if="doc.enquiry_id.drop_off_airport_id">
                                                            <span t-esc="doc.enquiry_id.drop_off_airport_id.name"/>
                                                            <span>(</span>
                                                            <span t-esc="doc.enquiry_id.drop_off_airport_id.code"/>
                                                            <span>)</span>
                                                        </t>
                                                    </t>
                                                </t>
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br/>
                <table class="table table-sm" style="border: 1px solid #4F4C4D; text-align:left;">
                    <thead>
                        <tr style="border: 1px solid #4F4C4D; text-align:left;">
                            <th style="border: 1px solid #4F4C4D;width: 25%;">
                                <span>Service Category</span>
                            </th>
                            <th style="border: 1px solid #4F4C4D; text-align:left;width: 50%;padding-left: 15px;">
                                <span>Features</span>
                            </th>
                            <th style="border: 1px solid #4F4C4D; text-align:left;width: 25%;">
                                <span>Service Charge</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="doc.additional_charges_ids[-1]" t-as="line">
                            <td style="border: 1px solid #4F4C4D; text-align:left;width: 25%;">
                                <span>Additional Charge</span>
                            </td>
                            <td style="border: 1px solid #4F4C4D;width: 50%; line-height:18px;">
                                <div style="padding-left: 15px;">
                                    <t style="margin-left:15px;"
                                       t-raw="line.description"/>
                                </div>
                            </td>
                            <td style="border: 1px solid #4F4C4D; text-align:left;width: 25%;">
                                <div style="text-align:left;">
                                    <t t-esc="doc.currency_id and doc.currency_id.name "/>
                                    <t t-esc="line.amount"/>
                                    <div style="margin: 32px 0px 32px 0px; text-align: right;">
                                        <a style="background-color: #0b8cc1; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;display: inline-block;"
                                           t-att-href="line.get_payment_link()">Pay Now
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="col-12">
                    <br/>
                    <t t-if="doc.terms_conditions">
                        <span><u>Terms and Conditions</u>:
                        </span>
                        <br/>
<!--                        <br/>-->
                        <span t-field="doc.terms_conditions"/>
                        <br/>
                        <br/>
                    </t>
                    <t t-if="doc.cancellation_policy">
                        <span><u>Cancellation Policy</u>:
                        </span>
                        <br/>
<!--                        <br/>-->
                        <span t-field="doc.cancellation_policy"/>
                        <br/>
<!--                        <br/>-->
                    </t>

                </div>
            </div>
        </t>

    </template>

    <template id="report_additional_charge">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="sr_uaa_main.report_additional_charge_custom_id" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>

<!--    <record id="action_report_additional_charge" model="ir.actions.report">-->
<!--        <field name="name">Additional Charge</field>-->
<!--        <field name="model">sale.order</field>-->
<!--        <field name="report_type">qweb-pdf</field>-->
<!--        <field name="report_name">sr_uaa_main.report_additional_charge</field>-->
<!--        <field name="report_file">sr_uaa_main.report_additional_charge</field>-->
<!--        <field name="binding_model_id" ref="model_sale_order"/>-->
<!--        <field name="binding_type">report</field>-->
<!--    </record>-->

</odoo>
